---
import Section1 from "@/components/features/Section1.astro";
import Section2 from "@/components/features/Section2.astro";
import Section3 from "@/components/features/Section3.astro";
import Section4 from "@/components/features/Section4.astro";
import Section5 from "@/components/features/Section5.astro";
import Review from "@/components/homepage/Review.astro";
import Base from "@/layouts/Base.astro";
import { getListPage } from "@/lib/contentParser.astro";
import { markdownify } from "@/lib/utils/textConverter";
import CallToAction from "@/partials/CallToAction.astro";

const featuresIndex = await getListPage("features", "-index");
if (featuresIndex.data.draft) {
  return Astro.redirect("/404");
}

const { hero, section_1, section_2, section_3, section_4, section_5, review } =
  featuresIndex.data;
---

<Base {...featuresIndex.data}>
  <section class="section pb-0" data-aos="fade-up-sm">
    <div class="container">
      <h1
        class="pb-4 max-xl:h2 text-center"
        data-aos="fade-up-sm"
        set:html={markdownify(hero.title)}
      />
      <p
        class="pb-8 text-balance text-center text-text/70"
        data-aos="fade-up-sm"
        set:html={markdownify(hero.content)}
      />
    </div>
  </section>
  <Section1 section_1={section_1} />
  <Section2 section_2={section_2} />

  <section class="section">
    <div class="container">
      <div class="row g-4">
        <div class="col-12 lg:col-5 min-h-full">
          <Section3 section_3={section_3} />
        </div>
        <div class="col-12 lg:col-7 min-h-full">
          <Section4 section_4={section_4} />
        </div>
        <div class="col-12 min-h-full">
          <Section5 section_5={section_5} />
        </div>
      </div>
    </div>
  </section>

  <section class="section pt-0">
    <div class="container">
      <div class="row max-lg:justify-center items-end mb-16">
        <div class="col-12 lg:col-7">
          <h2
            set:html={markdownify(review.title)}
            class="max-xl:h3 max-lg:text-center"
          />
        </div>
        <div class="col-12 lg:col-5">
          <p
            set:html={markdownify(review.content)}
            class="text-xl text-text/70 max-lg:text-center"
          />
        </div>
      </div>
      <Review />
    </div>
  </section>

  <CallToAction />
</Base>
