---
import ImageMod from "@/components/ImageMod.astro";
import MainAccordion from "@/components/functional-component/MainAccordion";
import Base from "@/layouts/Base.astro";
import { getListPage } from "@/lib/contentParser.astro";
import { markdownify } from "@/lib/utils/textConverter";

const integrationIndex = await getListPage("integration", "-index");
if (integrationIndex.data.draft) {
  return Astro.redirect("/404");
}
const { title, description, integrations } = integrationIndex.data;

const faq = await getListPage("faqSection", "faq");
---

<Base {...integrationIndex.data}>
  <section class="section" data-aos="fade-up-sm">
    <div class="container">
      <h1
        set:html={markdownify(title)}
        class="text-center max-xl:h2 text-balance mb-6"
        data-aos="fade-up-sm"
      />
      <p set:html={markdownify(description)} class="text-center text-balance" />
      <div class="row g-4 mt-10">
        {
          integrations.map((i: any) => (
            <div
              class="col-12 md:col-6 lg:col-4 2xl:col-3 max-h-full"
              data-aos="fade-up-sm"
              data-aos-delay={i * 50}
            >
              <div class="p-7 border border-border rounded-lg h-full">
                <div class="flex flex-col md:flex-row items-center mb-6">
                  <ImageMod
                    src={i.logo}
                    alt={i.logo}
                    width={61}
                    height={61}
                    format="svg"
                    class="mr-6"
                  />
                  <h5
                    set:html={markdownify(i.name)}
                    class="text-center text-xl"
                  />
                </div>

                <p
                  set:html={markdownify(i.details)}
                  class="text-lg text-text/70"
                />
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <MainAccordion faqs={faq.data} client:load />
</Base>
